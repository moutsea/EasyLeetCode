## 逻辑表达式

我们无论是在`for`循环还是`while`循环或者是`if`条件判断当中，都用到了逻辑判断。

我们之前举的例子都非常简单，都是单个的判断。有时候我们的逻辑非常复杂，判断的条件有多个，这个时候就需要使用逻辑表达式了。

逻辑表达式由多个逻辑运算符连接在一起，逻辑运算符分别有 OR, AND 和 NOT，翻译过来就是与或非。

### OR 运算符

or 运算符翻译过来是“或”的意思，表示两者或多者当中，有一个为`true`时结果为`true`，写作`||`，注意这里有两个竖线，单个竖线也是或运算，不过是位运算当中的或运算，表示的含义不同，千万不要搞错。

使用或运算符我们可以将多个判断条件并列在一起，只要有一个为`true`，最终的结果就是`true`。

```C++
5 == 5 || 4 < 4;
5 > 3 || 2 < 1 || 4 < 7;
```

这里`||`运算符的计算优先级比比较运算符低，所以这里可以不用括号。另外 C++当中规定`||`运算符也是一个顺序点，意味着编译器会计算左侧的值，再计算右侧的值。只要遇见表达式的结果为`true`则停止，不会再继续往右计算。

### AND 运算符

and 运算符翻译过来是“与”的意思，表示两个条件同时满足，即两者皆为`true`时结果为`true`，写作`&&`。

```C++
5 == 5 && 4 == 4;
4 == 3 && 1 < 2;
```

同样，`&&`运算符的优先级也小于比较运算符。另外，`&&`运算符也是顺序点。意味着 C++先执行左侧结果，再执行右侧。如果左侧结果为`false`，那么右侧的结果将不会再执行。这个特性非常有用，特别是当我们使用一些可能会非法的元素的时候，例如：

```C++
string s;
if (n < s.size() && s[n] == 'h') {
    // do something
}
```

在上面这个例子当中，我们需要判断`s[n]`这个元素，但是由于 n 可能很大超过字符串的范围。所以在使用之前需要先进行判断，如果`n < s.size()`不成立，那么`s[n]==h`的判断将不会执行，也就不会引发报错了。

C++当中还给了一个 case，当我们用`&&`运算符来判断范围的时候，千万不要进行简写：

```C++
if (a >= 5 && a < 10);  // 合法
if (5 <= a < 10);		// 非法
```

因为后者在编译器当中表示不同的含义，会被翻译成`(5 <= a) < 10`，也就是先判断`5 <= a`，拿这个结果再去和 10 进行判断。显然`5 <= a`的结果是一个`bool`值，它一定是小于 10 的，那么无论`a`等于多少，这个表达式永远为`true`。

### NOT 运算符

not 运算符也就是非运算符，表示对一个逻辑表达式的结果取反。`true`变成`false`，`false`变成`true`，写作`!`。例如：

```C++
if (!(x > 5));
```

and 和 or 运算符的优先级都低于比较运算符，但 not 运算符不然，它的优先级高于所有的关系运算符和算术运算符。所以如果我们取反的对象是一个表达式，一定要记得加上括号。

比如：

```C++
!(x > 5);
!x > 5;
```

后者会先对 x 计算取反的操作，得到的结果为`true`或`false`，无论是哪个值它都显然小于 5。

另外，not 运算符的优先级高于 and 高于 or。因此表达式：

```C++
age > 30 && age < 45 && !flag || weight > 300
```

会被解释成：

```C++
(age > 30 && age < 45 && (!flag)) || weight > 300
```
