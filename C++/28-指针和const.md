## 指针和 const

我们知道`const`关键字修饰的是不可变量，将它和指针一起使用，会有很多微妙的地方。

关于使用`const`来修饰指针，有两种不同的方式。第一种是让指针指向一个常量对象，这样可以防止使用该指针进行修改指向的值。第二种则是将指针本身声明为常量，可以防止改变指针指向的位置。下面我们来看下细节。

### 指向常量的指针

首先是指向常量的指针，含义是指针的类型是一个常量类型。所以写成：

```C++
const int * p;
```

可以理解成`p`是一个指针，它的类型是`const int`，也就是常量类型。它既可以用来指向一个常量类型，也可以指向一个非常量类型，下方的这两种方式都是合法的：

```C++
int age = 23;
const int* p = &age;

const double price = 233;
const double* pt = &price;
```

但是反过来，将一个`const`类型的变量赋值给一个非`const`的指针是非法的：

```C++
const int age = 23;
int* p = &age;	// 非法
```

如果非要这样做，可以使用`const_cast`运算符进行强制转换，这个我们会在之后的文章当中讨论。

另外还有一个很有意思的点，如果我们将一个非`const`类型的变量赋给了`const`类型的指针，虽然我们无法通过指针修改对应的值，但是通过变量修改却是可以的：

```C++
int age = 23;
const int* p = &age;

*p = 233;	// 非法
age = 233;	// 合法
```

还有，我们无法修改指针指向的值，但是修改指针指向的位置是可以的：

```C++
int age = 23;
int price = 233;
const int* p = &age;
p = &price;
```

### const 指针

上面我们介绍了指向`const`的指针，还有另外一种指针叫做`const`指针。`const`指针指的是指针本身是`const`修饰的，我们无法修改指针指向的位置。

```C++
int age = 23;
int* const p = &age;
```

但是我们修改指针指向的值是可以的：

```C++
*p = 2333;	// 合法
```

### 指针和内容都不可变

当然我们也可以将两种`const`叠加使用，让指针指向的对象以及对象的值都不可修改：

```C++
const int * const p = &age;
```
